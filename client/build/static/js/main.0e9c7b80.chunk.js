(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(29),r=a.n(c),o=(a(40),a(41),a(1)),s=a(3);const u=Object(n.createContext)({});function m(e){let{children:t}=e;const[a,c]=Object(n.useState)({});return l.a.createElement(u.Provider,{value:{userInfo:a,setUserInfo:c}},t)}var i=function(){const{userInfo:e,setUserInfo:t}=Object(n.useContext)(u);Object(n.useEffect)(()=>{fetch("http://localhost:4000/profile",{credentials:"include"}).then(e=>{e.json().then(e=>{t(e.userName)})})},[t]);const a=null===e||void 0===e?void 0:e.userName;return l.a.createElement("header",null,l.a.createElement(s.b,{to:"/",className:"logo"},"My Blog"),l.a.createElement("nav",null,a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{to:"/create"},"Create New post"),l.a.createElement("a",{href:"/",onClick:function(){fetch("http://localhost:4000/logout",{credentials:"include",method:"POST"}),t(null)}},"Logout")),!a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(s.b,{to:"/login"},"Login"),l.a.createElement(s.b,{to:"/register"},"Register"))))};function d(){return l.a.createElement("main",null,l.a.createElement(i,null),l.a.createElement(o.b,null))}var h=a(117);function p(e){let{_id:t,title:a,summary:n,cover:c,content:r,createdAt:o,author:u}=e;return l.a.createElement("div",null,l.a.createElement("div",{className:"post"},l.a.createElement("div",{className:"image"},l.a.createElement(s.b,{to:"/post/".concat(t)},l.a.createElement("img",{src:"http://localhost:4000/"+c,alt:""}))),l.a.createElement("div",{className:"texts"},l.a.createElement(s.b,{to:"/post/".concat(t)},l.a.createElement("h2",null,a)),l.a.createElement("p",{className:"info"},l.a.createElement("a",{href:"/",className:"author"},u.userName),l.a.createElement("time",null,Object(h.a)(new Date(o),"MMM d, yyyy HH:mm"))),l.a.createElement("p",{className:"summary"},n))))}function E(){const[e,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{fetch("http://localhost:4000/post").then(e=>{e.json().then(e=>{t(e)})})},[]),l.a.createElement(l.a.Fragment,null,e.length>0&&e.map(e=>l.a.createElement(p,e)))}function f(){const[e,t]=Object(n.useState)(""),[a,c]=Object(n.useState)(""),[r,s]=Object(n.useState)(!1),{setUserInfo:m}=Object(n.useContext)(u);return r?l.a.createElement(o.a,{to:"/"}):l.a.createElement("form",{className:"login",onSubmit:async function(t){t.preventDefault();const n=await fetch("http://localhost:4000/login",{method:"POST",body:JSON.stringify({userName:e,password:a}),headers:{"Content-Type":"application/json"},credentials:"include"});n.ok?n.json().then(e=>{m(e),s(!0)}):alert("wrong credentials")}},l.a.createElement("h1",null,"Login"),l.a.createElement("input",{type:"text",placeholder:"UserName",value:e,onChange:e=>{t(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>{c(e.target.value)}}),l.a.createElement("button",null,"Login"))}function g(){const[e,t]=Object(n.useState)(""),[a,c]=Object(n.useState)("");return l.a.createElement("form",{className:"register",onSubmit:async function(t){t.preventDefault(),200===(await fetch("http://localhost:4000/register",{method:"POST",body:JSON.stringify({userName:e,password:a}),headers:{"Content-Type":"application/json"}})).status?alert("registration successful"):alert("registration failed")}},l.a.createElement("h1",null,"Register"),l.a.createElement("input",{type:"text",placeholder:"UserName",value:e,onChange:e=>{t(e.target.value)}}),l.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>{c(e.target.value)}}),l.a.createElement("button",null,"Register"))}var b=a(30),v=a.n(b);a(115);const y={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},j=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"];function O(e){let{value:t,onChange:a}=e;return l.a.createElement(v.a,{modules:y,formats:j,theme:"snow",value:t,onChange:a})}function S(){const[e,t]=Object(n.useState)(""),[a,c]=Object(n.useState)(""),[r,s]=Object(n.useState)(""),[u,m]=Object(n.useState)(""),[i,d]=Object(n.useState)(!1);return i?l.a.createElement(o.a,{to:"/"}):l.a.createElement("form",{onSubmit:async function(t){const n=new FormData;n.set("title",e),n.set("summary",a),n.set("content",r),n.set("file",u[0]),t.preventDefault(),(await fetch("http://localhost:4000/post",{method:"POST",body:n,credentials:"include"})).ok&&d(!0)}},l.a.createElement("input",{type:"title",name:"",id:"",placeholder:"Title",value:e,onChange:e=>{t(e.target.value)}}),l.a.createElement("input",{type:"Summary",name:"",id:"",placeholder:"Summary",value:a,onChange:e=>{c(e.target.value)}}),l.a.createElement("input",{type:"file",onChange:e=>{m(e.target.files)}}),l.a.createElement(O,{value:r,onChange:s}),l.a.createElement("button",{style:{marginTop:"5px"}},"Create Post"))}function C(){const[e,t]=Object(n.useState)(""),{userInfo:a}=Object(n.useContext)(u),{id:c}=Object(o.r)();return Object(n.useEffect)(()=>{fetch("http://localhost:4000/post/".concat(c)).then(e=>{e.json().then(e=>{t(e)})})},[c]),e?l.a.createElement("div",{className:"post-page"},l.a.createElement("div",{className:"image"},l.a.createElement("img",{src:"http://localhost:4000/".concat(e.cover),alt:"img"})),l.a.createElement("h1",null,e.title),l.a.createElement("time",null,Object(h.a)(new Date(e.createdAt))),l.a.createElement("div",{className:"author"},"by ",e.author.userName),a&&a.id===e.author._id&&l.a.createElement("div",{className:"edit-row"},l.a.createElement(s.b,{className:"edit-btn",to:"/edit/".concat(e._id)},"Edit this post")),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}})):""}function N(){const{id:e}=Object(o.r)(),[t,a]=Object(n.useState)(""),[c,r]=Object(n.useState)(""),[s,u]=Object(n.useState)(""),[m,i]=Object(n.useState)(""),[d,h]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{fetch("http://localhost:4000/post/"+e).then(e=>{e.json().then(e=>{a(e.title),u(e.content),r(e.summary)})})},[e]),d?l.a.createElement(o.a,{to:"/post/"+e}):l.a.createElement("form",{onSubmit:async function(a){a.preventDefault();const n=new FormData;n.set("title",t),n.set("summary",c),n.set("content",s),n.set("id",e),(null===m||void 0===m?void 0:m[0])&&n.set("file",null===m||void 0===m?void 0:m[0]),(await fetch("http://localhost:4000/post",{method:"PUT",body:n,credentials:"include"})).ok&&h(!0)}},l.a.createElement("input",{type:"title",name:"",id:"",placeholder:"Title",value:t,onChange:e=>{a(e.target.value)}}),l.a.createElement("input",{type:"Summary",name:"",id:"",placeholder:"Summary",value:c,onChange:e=>{r(e.target.value)}}),l.a.createElement("input",{type:"file",onChange:e=>{i(e.target.files)}}),l.a.createElement(O,{value:s,onChange:u}),l.a.createElement("button",{style:{marginTop:"5px"}},"Update Post"))}var w=function(){return l.a.createElement(m,null,l.a.createElement(o.e,null,l.a.createElement(o.c,{path:"/",element:l.a.createElement(d,null)},l.a.createElement(o.c,{index:!0,element:l.a.createElement(E,null)}),l.a.createElement(o.c,{path:"/login",element:l.a.createElement(f,null)}),l.a.createElement(o.c,{path:"/register",element:l.a.createElement(g,null)}),l.a.createElement(o.c,{path:"/create",element:l.a.createElement(S,null)}),l.a.createElement(o.c,{path:"/post/:id",element:l.a.createElement(C,null)}),l.a.createElement(o.c,{path:"/edit/:id",element:l.a.createElement(N,null)}))))};var T=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,118)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:c,getTTFB:r}=t;a(e),n(e),l(e),c(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s.a,null,l.a.createElement(w,null)))),T()},32:function(e,t,a){e.exports=a(116)},40:function(e,t,a){},41:function(e,t,a){}},[[32,1,2]]]);
//# sourceMappingURL=main.0e9c7b80.chunk.js.map